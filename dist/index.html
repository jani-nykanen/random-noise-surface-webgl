<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="overflow: hidden; background-color: black; color: white">
<script>
'use strict';class m{constructor(a,b,c,d,e,f){this.B=f.length;this.u=a.createBuffer();this.g=null==c?null:a.createBuffer();this.b=null==d?null:a.createBuffer();this.a=null==e?null:a.createBuffer();this.i=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.u);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);null!=c&&(a.bindBuffer(a.ARRAY_BUFFER,this.g),a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW));null!=d&&(a.bindBuffer(a.ARRAY_BUFFER,this.b),a.bufferData(a.ARRAY_BUFFER,
new Float32Array(d),a.STATIC_DRAW));null!=e&&(a.bindBuffer(a.ARRAY_BUFFER,this.a),a.bufferData(a.ARRAY_BUFFER,new Float32Array(e),a.STATIC_DRAW));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.i);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),a.STATIC_DRAW)}bind(a){a.bindBuffer(a.ARRAY_BUFFER,this.u);a.vertexAttribPointer(0,3,a.FLOAT,a.C,0,0);null!=this.g&&(a.bindBuffer(a.ARRAY_BUFFER,this.g),a.vertexAttribPointer(1,2,a.FLOAT,a.C,0,0));null!=this.b&&(a.bindBuffer(a.ARRAY_BUFFER,this.b),a.vertexAttribPointer(2,
3,a.FLOAT,a.C,0,0));null!=this.a&&(a.bindBuffer(a.ARRAY_BUFFER,this.a),a.vertexAttribPointer(3,3,a.FLOAT,a.C,0,0));a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.i)}A(a){a.drawElements(a.TRIANGLES,this.B,a.UNSIGNED_SHORT,0)}};class p{constructor(a,b){this.x=void 0==a?0:a;this.y=void 0==b?0:b}length(){return Math.hypot(this.x,this.y)}normalize(a){let b=this.length();1E-4>b?(this.x=a?1:0,this.y=0):(this.x/=b,this.y/=b)}clone(){return new p(this.x,this.y)}add(a,b){"object"==typeof a?(this.x+=a.x,this.y+=a.y):(this.x+=a,this.y+=b)}multiply(a){this.x*=a;this.y*=a}}function w(a,b){a=a.clone();a.normalize(b);return a}function x(a,b){a=a.clone();a.add(b,void 0,void 0);return a}
function y(a,b){return new z(a.y*b.z-b.y*a.z,-(a.x*b.z-b.x*a.z),a.x*b.y-b.x*a.y)}
class z{constructor(a,b,c){this.x=void 0==a?0:a;this.y=void 0==b?0:b;this.z=void 0==c?0:c}length(){return Math.hypot(this.x,this.y,this.z)}normalize(a){let b=this.length();1E-4>b?(this.x=a?1:0,this.z=this.y=0):(this.x/=b,this.y/=b,this.z/=b)}clone(){return new z(this.x,this.y,this.z)}add(a,b,c){"object"==typeof a?(this.x+=a.x,this.y+=a.y,this.z+=a.z):(this.x+=a,this.y+=b,this.z+=c)}multiply(a){this.x*=a;this.y*=a;this.z*=a}}function A(){return new B(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}
function C(a,b){return a.multiply(b)}function D(a){let b=new B;for(let c=0;4>c;++c)for(let d=0;4>d;++d)b.c[4*d+c]=a.c[4*c+d];return b}class B{constructor(){this.c=new Float32Array(16);this.c.fill(0);for(let a=0;a<Math.min(this.c.length,arguments.length);++a)this.c[a]=arguments[a]}multiply(a){let b=new B;for(let c=0;4>c;++c)for(let d=0;4>d;++d)for(let e=0;4>e;++e)b.c[4*c+d]+=this.c[4*c+e]*a.c[4*e+d];return b}clone(){let a=new B;a.c=Float32Array.from(this.c);return a}};class aa{constructor(){this.model=A();this.view=A();this.g=A();this.i=A();this.b=A();this.u=[];this.B=[];this.a=!1}translate(a,b,c){void 0==c&&(c=0);this.model=C(this.model,new B(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1));this.a=!1}scale(a,b,c){void 0==c&&(c=0);this.model=C(this.model,new B(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1));this.a=!1}push(){this.u.push(this.model.clone());this.B.push(this.b.clone())}pop(){this.model=this.u.pop();this.b=this.B.pop();this.a=!1}use(a){null!=a&&(this.a||(this.i=C(this.g,this.view.multiply(this.model)),
this.a=!0),E(a,this.i),F(a,this.b))}};function E(a,b){a.f.uniformMatrix4fv(a.a.transform,!1,D(b).c)}function F(a,b){a.f.uniformMatrix4fv(a.a.rotation,!1,D(b).c)}function G(a,b,c,d,e,f){let g=a.f;g.uniform3f(a.a.pos,b,c,0);g.uniform3f(a.a.size,d,e,f)}function H(a,b,c,d,e){let f=a.f;f.uniform2f(a.a.texPos,b,c);f.uniform2f(a.a.texSize,d,e)}
class ba{constructor(a,b,c){this.f=a;this.a={};a=this.f;b=this.createShader(b,a.VERTEX_SHADER);var d=this.createShader(c,a.FRAGMENT_SHADER);c=a.createProgram();a.attachShader(c,b);a.attachShader(c,d);b=c;d=this.f;d.bindAttribLocation(b,0,"vertexPos");d.bindAttribLocation(b,1,"vertexUV");d.bindAttribLocation(b,2,"vertexNormal");d.bindAttribLocation(b,3,"vertexColor");a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw"Shader error: "+a.getProgramInfoLog(c);this.b=a=c;a=this.f;c="transform rotation color t0 fogColor fogDensity lightDir lightMag pos size texPos texSize".split(" ");
for(let e of c)this.a[e]=a.getUniformLocation(this.b,e)}createShader(a,b){let c=this.f;b=c.createShader(b);c.shaderSource(b,a);c.compileShader(b);if(!c.getShaderParameter(b,c.COMPILE_STATUS))throw"Shader error:\n"+c.getShaderInfoLog(b);return b}use(){let a=this.f;a.useProgram(this.b);let b=A();a.uniform1i(this.a.t0,0);G(this,0,0,1,1,1);H(this,0,0,1,1);F(this,b);E(this,b);this.s(1,1,1,1)}s(a,b,c,d){this.f.uniform4f(this.a.color,a,b,c,d)}D(a,b,c,d){let e=this.f;e.uniform4f(this.a.fogColor,b,c,d,1);
e.uniform1f(this.a.fogDensity,a)}};const I={noTextureLight:"attribute vec3 vertexPos;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\n   \nuniform mat4 transform;\nuniform mat4 rotation;\nuniform vec3 pos;\nuniform vec3 size;\nuniform vec3 lightDir;\nuniform vec4 color;\nuniform float lightMag;\n\nvarying float light;\nvarying vec4 faceColor;\n   \nvoid main() {\n    vec3 p = vertexPos * size + pos;\n    vec4 o = transform * vec4(p, 1);\n    gl_Position = o;\n    \n    vec3 rot = normalize((rotation * vec4(vertexNormal,1)).xyz);\n    light = clamp(lightMag * 0.5 * (1.0+dot(rot, lightDir)), 0.0, 1.0);\n\t\n\tfaceColor = color * vec4(vertexColor, 1.0);\n}",
texturedNoLight:"attribute vec3 vertexPos;\nattribute vec2 vertexUV;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\n   \nuniform mat4 transform;\nuniform mat4 rotation;\nuniform vec3 pos;\nuniform vec3 size;\nuniform vec3 lightDir;\nuniform float lightMag;\nuniform vec4 color;\n\nvarying vec2 uv;\nvarying vec4 faceColor;\n   \nvoid main() {\n    vec3 p = vertexPos * size + pos;\n    vec4 o = transform * vec4(p, 1);\n    gl_Position = o;\n    \n    uv = vertexUV;\n\tfaceColor = color * vec4(vertexColor, 1.0);\n}",
noTexture:"attribute vec3 vertexPos;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\n   \nuniform mat4 transform;\nuniform vec3 pos;\nuniform vec3 size;\nuniform vec4 color;\n\nvarying vec4 faceColor;\n   \nvoid main() {\n    vec3 p = vertexPos * size + pos;\n    vec4 o = transform * vec4(p, 1);\n    gl_Position = o;\n\t\n\tfaceColor = color * vec4(vertexColor, 1.0);\n}"},J={fogAndLightNoTexture:"precision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 fogColor;\nuniform float fogDensity;\n\nvarying float light;\nvarying vec4 faceColor;\n\nvoid main() {\n\n    vec4 a = gl_FragCoord;\n    float z = a.z / a.w;\n    float d = z * fogDensity;\n    float fog = 1.0 / exp(d*d);\n    fog = clamp(fog, 0.0, 1.0);\n    gl_FragColor = vec4(\n        (1.0-light)*(fog*faceColor.xyz + (1.0-fog)*fogColor.xyz), \n        faceColor.a);\n\t\t\n}",
lightNoTexture:"precision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 fogColor;\nuniform float fogDensity;\n\nvarying float light;\nvarying vec4 faceColor;\n\nvoid main() {\n\n    gl_FragColor = vec4((1.0-light)*faceColor.xyz, faceColor.a);\n}",fogNoTexture:"precision mediump float;\n \nuniform sampler2D t0;\nuniform vec4 fogColor;\nuniform float fogDensity;\n\nvarying vec4 faceColor;\n\nvoid main() {\n\n    vec4 a = gl_FragCoord;\n    float z = a.z / a.w;\n    float d = z * fogDensity;\n    float fog = 1.0 / exp(d*d);\n    fog = clamp(fog, 0.0, 1.0);\n    gl_FragColor = vec4(\n        fog*faceColor.xyz + (1.0-fog)*fogColor.xyz, \n        faceColor.a);\n}",
textured:"precision mediump float;\n \nuniform sampler2D t0;\nuniform vec2 texPos;\nuniform vec2 texSize;\n\nvarying vec2 uv;\nvarying float light;\nvarying vec4 faceColor;\n\nvoid main() {\n    const float DELTA = 0.001;\n    vec2 tex = uv;    \n    tex.x *= texSize.x;\n    tex.y *= texSize.y;\n    tex += texPos;\n    vec4 res = texture2D(t0, tex) * faceColor;\n    if(res.a <= DELTA) {\n        discard;\n    }\n    gl_FragColor = res;\n}",noTexture:"precision mediump float;\n\nvarying vec4 faceColor;\n\nvoid main() {\n    gl_FragColor = faceColor;\n}"};
function K(a,b,c){if(void 0==I[b]||void 0==J[c])throw"ERROR! Required shader sources do not exist: "+(void 0==I[b]?"Vertex: "+b+" ":"")+(void 0==J[c]?"Fragment: "+c:"");return new ba(a,I[b],J[c])};function ca(a){let b=document.createElement("canvas");b.width=512;b.height=512;let c=b.getContext("2d");c.imageSmoothingEnabled=!1;c.font="bold 24px Arial";c.textAlign="center";c.fillStyle="#FFFFFF";let d,e;for(let f=0;255>f;++f)d=f%16*32+16,e=32*Math.floor(f/16)+24,c.fillText(String.fromCharCode(f),d,e);return new ea(a,b)};class ea{constructor(a,b){this.a=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.a);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);this.width=b.width;this.height=b.height}bind(a){a.bindTexture(a.TEXTURE_2D,this.a)}}
function fa(a){let b=document.createElement("div");b.setAttribute("style","position: absolute; top: 0; left: 0; z-index: -1;");a.canvas=document.createElement("canvas");a.canvas.width=window.innerWidth;a.canvas.height=window.innerHeight;b.appendChild(a.canvas);document.body.appendChild(b);a.f=a.canvas.getContext("webgl",{alpha:!1,antialias:!0})}
function ha(a){let b=a.f;b.activeTexture(b.TEXTURE0);b.enable(b.DEPTH_TEST);b.enable(b.BLEND);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2);b.enableVertexAttribArray(3);b.viewport(0,0,a.width,a.height)}function L(a){var b=window.innerWidth,c=window.innerHeight;a.canvas.width=b;a.canvas.height=c;a.f.viewport(0,0,b,c);a.width=b;a.height=c}function O(a){a.l.use(a.j)}
function P(a,b){b=b?a.m.g:a.m.a;b!=a.j&&(a.j=b,a.j.use(),a.s(1,1,1,1),O(a))}function Q(a,b){b?a.f.enable(a.f.DEPTH_TEST):a.f.disable(a.f.DEPTH_TEST)}function R(a){G(a.j,0,0,1,1,1);H(a.j,0,0,1,1)}
class ia{constructor(a,b){this.f=this.canvas=null;this.width=a;this.height=b;fa(this);ha(this);L(this);this.m=[];this.m.a=K(this.f,"noTexture","noTexture");this.m.g=K(this.f,"texturedNoLight","textured");this.m.b=K(this.f,"noTextureLight","fogAndLightNoTexture");this.m.i=K(this.f,"texturedNoLight","fogNoTexture");this.m.u=K(this.f,"noTextureLight","lightNoTexture");this.j=this.m.a;this.j.use();this.a=this.v=null;this.b=new m(this.f,[0,0,0,1,0,0,1,1,0,0,1,0],[0,0,1,0,1,1,0,1],[0,0,-1,0,0,-1,0,0,-1,
0,0,-1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,2,2,3,0]);this.l=new aa;this.G=ca(this.f);window.addEventListener("resize",()=>L(this))}clear(a,b,c){let d=this.f;d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT);d.clearColor(a,b,c,1)}bindTexture(a){null!=a&&a!=this.a&&(this.a=a,a.bind(this.f))}s(a,b,c,d){void 0==a?c=b=a=1:void 0==b&&(c=b=a);void 0==d&&(d=1);this.j.s(a,b,c,d)}D(a,b,c,d){this.j.D(a,b,c,d)}};class S{constructor(){}b(){}g(){}};class ja{constructor(a,b){this.H=a;this.F=b;this.state=0}}function T(a,b,c,d){a.actions[b]=new ja(c,d);a.b[c]=!0;void 0!=d&&(a.b[d]=!0);return a}function ka(a){a.o.x=0;a.o.y=0}
class la{constructor(a){this.a={};this.b={};this.actions={};this.g=!1;this.o=new z(0,0,0);window.addEventListener("keydown",b=>{var c=b.code;1!=this.a[c]&&(this.a[c]=3);this.b[c]&&b.preventDefault()});window.addEventListener("keyup",b=>{var c=b.code;0!=this.a[c]&&(this.a[c]=2);this.b[c]&&b.preventDefault()});window.addEventListener("contextmenu",b=>{b.preventDefault()});window.addEventListener("mousemove",b=>{if(this.g){var c=b.movementY;this.o.x+=b.movementX;this.o.y+=c}else window.focus()});window.addEventListener("mousedown",
()=>{this.g||window.focus();a.canvas.requestPointerLock()});document.addEventListener("pointerlockchange",()=>{this.g=document.pointerLockElement==a.canvas})}update(){for(var a in this.actions)this.actions[a].state=this.a[this.actions[a].H]|0,void 0!=this.actions[a].F&&0==this.actions[a].state&&(this.actions[a].state=this.a[this.actions[a].F]|0);a=this.a;for(let b in a)3==a[b]?a[b]=1:2==a[b]&&(a[b]=0)}};function U(a,b){const c=16.66667*a.b.step;a.a+=b-a.i;a.a=Math.min(5*c,a.a);a.i=b;b=a.a/c|0;let d=!0;for(;0<b--;)a.g.b(a.b),d&&(a.b.input.update(),d=!1),a.a-=c;ka(a.b.input);a.g.g(a.canvas);window.requestAnimationFrame(e=>U(a,e))}
class ma{constructor(a,b){this.i=this.a=0;this.canvas=new ia(a,b);this.b={step:1,input:T(T(T(T(T(T(new la(this.canvas),"left","ArrowLeft","KeyA"),"up","ArrowUp","KeyW"),"right","ArrowRight","KeyD"),"down","ArrowDown","KeyS"),"start","Enter",null),"fire1","Space")};this.g=new S(this.b)}};function V(a,b){return(a%b+b)%b}function W(a,b,c){a<b?a=Math.min(a+c,b):a>b&&(a=Math.max(a-c,b));return a}function X(a,b,c){return(1-c)*a+c*b};function na(a){return new z(Math.sin(a.a.x)*Math.cos(a.a.y),Math.cos(a.a.x),Math.sin(a.a.x)*Math.sin(a.a.y))}
function oa(a,b,c,d){{var e=a.h.x;var f=a.h.z,g=b.x,h=b.z,k=c.x,n=c.z,q=d.x,l=d.z;let u=e-g,r=f-h,t=0<(k-g)*r-(n-h)*u;e=!(0<(q-g)*r-(l-h)*u==t||0<(q-k)*(f-n)-(l-n)*(e-k)!=t)}if(!e)return!1;c=y(new z(c.x-b.x,c.y-b.y,c.z-b.z),new z(d.x-b.x,d.y-b.y,d.z-b.z));if(1E-4>Math.abs(c.y))return!1;c.normalize();b=-(a.h.x*c.x+a.h.z*c.z-(b.x*c.x+b.y*c.y+b.z*c.z))/c.y;return a.h.y>b-.1&&0<a.speed.y?(a.speed.y=0,a.h.y=b,a.g=!0,a.b=0,!0):!1}
class pa{constructor(a){this.h=a.clone();this.a=new z(Math.PI/2,Math.PI/2,0);this.speed=new z;this.target=this.speed.clone();this.i=new z(.0033,.0033,.0033);this.height=.5;this.b=0;this.g=!1}update(a){{this.target.y=.1;this.a.y+=.01*-a.input.o.x;this.a.x+=.01*-a.input.o.y;let d=a.input.actions.fire1.state;if(this.g){var b=new z(0,0,0);a.input.actions.up.state&1?b.z=1:a.input.actions.down.state&1&&(b.z=-1);a.input.actions.left.state&1?b.x=-1:a.input.actions.right.state&1&&(b.x=1);b.normalize(!1);var c=
this.a.y-Math.PI/2+Math.atan2(b.z,b.x);b=.033*b.length();this.target.x=Math.cos(c)*b;this.target.z=Math.sin(c)*b;this.g&&3==d&&(this.b=15,this.g=!1,this.speed=this.target.clone())}else if(2==d||0==d)this.b=0}c=Math.PI/3;this.speed.x=W(this.speed.x,this.target.x,this.i.x*a.step);this.speed.y=W(this.speed.y,this.target.y,this.i.y*a.step);this.speed.z=W(this.speed.z,this.target.z,this.i.z*a.step);0<this.b&&(this.b-=a.step,this.speed.y=-.05);this.h.x+=this.speed.x*a.step;this.h.y+=this.speed.y*a.step;
this.h.z+=this.speed.z*a.step;this.a.x=Math.max(Math.PI/2-c,Math.min(this.a.x,Math.PI/2+c));this.a.y=V(this.a.y,2*Math.PI);this.g=!1}};function Y(a,b,c){return a.data[V(c,a.height)*a.width+V(b,a.width)]}class qa{constructor(a,b){this.data=Array(a*b);this.data.fill(0);this.width=a;this.height=b}clone(){let a=new qa(this.width,this.height);a.data=Array.from(this.data);return a}}
class ra{constructor(a,b,c){this.width=b.width;this.a=b.height;this.b=b.clone();this.g=null;this.i=c.clone();this.scale=a}A(a){if(null==this.g){{var b=a.f;var c=this.i,d=1/this.width,e=1/this.a;let n=[],q=[],l=[],u=[],r=[];for(var f=0;f<this.a;++f)for(var g=0;g<this.width;++g)n.push(d*g,Y(this.b,g,f),e*f),u.push(c.x,c.y,c.z),q.push(g*d,f*e);for(c=0;c<this.a-1;++c)for(d=0;d<this.width-1;++d)r.push(c*this.width+d,c*this.width+d+1,(c+1)*this.width+d+1,(c+1)*this.width+d+1,(c+1)*this.width+d,c*this.width+
d);for(c=0;c<this.a;++c)for(d=0;d<this.width;++d)if(d==this.width-1&&c==this.a-1&&l.push(l[3*((c-1)*this.width+d-1)],l[3*((c-1)*this.width+d-1)+1],l[3*((c-1)*this.width+d-1)+2]),d==this.width-1)l.push(l[3*(c*this.width+d-1)],l[3*(c*this.width+d-1)+1],l[3*(c*this.width+d-1)+2]);else if(c==this.a-1)l.push(l[3*((c-1)*this.width+d)],l[3*((c-1)*this.width+d)+1],l[3*((c-1)*this.width+d)+2]);else{{e=n;var h=c*this.width+d,k=c*this.width+d+1;f=(c+1)*this.width+d+1;g=e[3*h];let t=e[3*h+1];h=e[3*h+2];k=w(new z(e[3*
k]-g,e[3*k+1]-t,e[3*k+2]-h),!1);e=w(new z(e[3*f]-g,e[3*f+1]-t,e[3*f+2]-h),!1);e=y(k,e)}l.push(e.x,e.y,e.z)}b=new m(b,n,q,l,u,r)}this.g=b}a.l.push();a.l.scale(this.scale,this.scale,this.scale);a.l.translate(-.5,0,-.5);O(a);b=this.g;a.bindTexture(null);b!=a.v&&(a.v=b,b.bind(a.f));b.A(a.f);a.l.pop();O(a)}};class sa{constructor(a,b,c,d){this.i=a;this.b=b;this.g=c;this.a=d}next(){return this.a=(this.b*this.a+this.g)%this.i}}function Z(a,b,c,d,e){a=a[c%16*16+b%16];return(d-b)*a.x+(e-c)*a.y};class ta extends S{constructor(a){super(a);this.a=new pa(new z(1E-4,0,1E-4));{a=Math.SQRT2/2;var b=new sa(-2147483649,1103515245,12345,(new Date).getTime()|0);var c=Array(256);for(var d=0;256>d;++d){var e=d;var f=(new p(b.next()%2E3/1E3-1,b.next()%2E3/1E3-1)).clone();f.normalize(!0);c[e]=f}e=c;b=Array(256);for(c=0;c<b.length;++c)b[c]=e[c*(c+3)%256].clone();e=Array(16384);let h,k,n;for(let q=0;128>q;++q)for(let l=0;128>l;++l){n=l/8;f=q/8;k=n|0;d=f|0;var g=Z(b,k,d,n,f);h=Z(b,k+1,d,n,f);c=X(g,h,n-k);
g=Z(b,k,d+1,n,f);h=Z(b,k+1,d+1,n,f);g=X(g,h,n-k);e[128*q+l]=X(c,g,f-d)/a}b=e}a=new qa(128,128);a.data=Array.from(b);for(b=0;b<a.data.length;++b)a.data[b]*=.04;this.i=new ra(40,a,new z(1,1.5,.5))}b(a){this.a.update(a);{a=this.i;var b=this.a;let d=a.scale/a.width;var c=a.scale/a.a;let e=Math.floor((b.h.x+a.scale/2)/d),f=Math.floor((b.h.z+a.scale/2)/c),g=e*d-a.scale/2,h=f*c-a.scale/2,k=new z(g,Y(a.b,e,f)*a.scale,h),n=new z(g+d,Y(a.b,e+1,f+1)*a.scale,h+c);c=new z(g,Y(a.b,e,f+1)*a.scale,h+c);oa(b,k,new z(g+
d,Y(a.b,e+1,f)*a.scale,h),n)||oa(b,n,c,k)}}g(a){a.clear(0,0,0);a.s(1,1,1,1);R(a);P(a,!1);Q(a,!0);var b=a.m.b;b!=a.j&&(a.j=b,a.j.use(),a.s(1,1,1,1),O(a));b=na(this.a);var c=a.j,d=c.f;d.uniform3f(c.a.lightDir,b.x,b.y,b.z);d.uniform1f(c.a.lightMag,1);a.D(.2,0,0,0);b=a.l;b.model=A();b.b=A();b.a=!1;b=a.l;c=a.width/a.height;var e=70/180*Math.PI;d=new B;e=1/Math.tan(e/2);d.c[0]=e/c;d.c[5]=e;d.c[10]=-100.1/99.9;d.c[11]=-20/99.9;d.c[14]=-1;c=d;b.g=c;b.a=!1;d=this.a;e=na(d);b=a.l;c=x(d.h,new z(0,-d.height,
0));d=new z(d.h.x+e.x,d.h.y+e.y,d.h.z+e.z);c=new z(c.x,c.y,c.z);e=new z(d.x,d.y,d.z);var f=new z(0,1,0);d=A();e=w(x(c,new z(-e.x,-e.y,-e.z)));f=w(y(e,f));var g=y(e,f);d.c[0]=f.x;d.c[1]=f.y;d.c[2]=f.z;d.c[4]=g.x;d.c[5]=g.y;d.c[6]=g.z;d.c[8]=e.x;d.c[9]=e.y;d.c[10]=e.z;d.c[3]=-f.x*c.x-f.y*c.y-f.z*c.z;d.c[7]=-g.x*c.x-g.y*c.y-g.z*c.z;d.c[11]=-e.x*c.x-e.y*c.y-e.z*c.z;c=d;b.view=c;b.a=!1;O(a);this.i.A(a);Q(a,!1);R(a);b=a.l;b.model=A();b.b=A();b.a=!1;b=a.l;c=a.width;d=a.height;b.view=A();e=A();e.c[0]=2/(c-
0);e.c[3]=-(c+0)/(c-0);e.c[5]=2/(0-d);e.c[7]=-(0+d)/(0-d);e.c[10]=-1;e.c[11]=-0;e.c[15]=1;c=e;b.g=c;b.a=!1;O(a);P(a,!0);a.s(1,1,1,1);b=a.G;e=b.width/16;{c="x="+String(Math.floor(100*this.a.h.x)/100)+"\ny="+String(Math.floor(100*this.a.h.y)/100)+"\nz="+String(Math.floor(100*this.a.h.z)/100);d=e;let v=b.width/16,M=2,da=2;let ua=d/v,va=e/v;for(let N=0;N<c.length;++N){var h=c.charCodeAt(N);if(10==h)M=2,da+=(v+0)*va;else{f=a;g=b;var k=h%16*v;h=(h/16|0)*v;var n=v,q=v,l=M,u=da,r=d,t=e;null==r&&(r=n);null==
t&&(t=q);0>r&&(l-=r);0>t&&(u-=t);G(f.j,l,u,r,t,0);H(f.j,k/g.width,h/g.height,n/g.width,q/g.height);k=f;h=f.b;h!=k.v&&(k.v=h,h.bind(k.f));f.bindTexture(g);f.b.A(f.f);M+=(v+-18)*ua}}}}};window.onload=()=>{var a=new ma(256,192);a.g=new ta.prototype.constructor(a.b);U(a,0)};
</script>
</body>
</html>
